// pages/personjl/personjl.js
const { UserService, user } = require('../../service/user_service');
const { checkPortraitUrl: stringEb } = require('../../utils/string_util');

const app = getApp();

Page({

	/**
	 * 页面的初始数据
	 */
	data: {
		tximg: '/img/tx.png',
		name: '张三',
		sex: '女',
		year: '24',
		cellphone: '13111111111',
		gznl: '1-3',
		yxjobname: '保洁工作',
		ygz: '3000-5000',
		sqname: [
			{ sqname: '东湖社区' },
			{ sqname: '定王台街道' },
			{ sqname: '湘湖街道' },
		],
		gzjy: '填写工作经验，让HR快速看到你',
		qzjy: [
			{
				companyname: '长沙竟网科技有限公司', jobname: 'UI设计师', jobyear: '2022.03-至今',
				jobdsc: [
					{ jobjl: '1.根据设计要求完成建筑风格、外形等总体设计;' },
					{ jobjl: '2.提供各种建筑主体设计、户型设计、外墙设计、景 观设计等;' }
				]
			}
		],
		boolean: false,
		jszj: '点击添加专业技能',
		selfpj: false,
		zwpj: '输入自我评价',

		zyjn: true,
		gerenzyjn: [
			{ jobjl: 'java,.net,c++' }
		],
	},
	//工作经历  添加
	gzjltj() {
		wx.navigateTo({
			url: '/pages/gzjl/gzjl',
		})
	},
	/**
	 * 生命周期函数--监听页面加载
	 */
	onLoad: function (options) {
		this._init();
	},

	/**
	 * 生命周期函数--监听页面初次渲染完成
	 */
	onReady: function () {

	},

	/**
	 * 生命周期函数--监听页面显示
	 */
	onShow: function () {

	},

	/**
	 * 生命周期函数--监听页面隐藏
	 */
	onHide: function () {

	},

	/**
	 * 生命周期函数--监听页面卸载
	 */
	onUnload: function () {

	},

	/**
	 * 页面相关事件处理函数--监听用户下拉动作
	 */
	onPullDownRefresh: function () {

	},

	/**
	 * 页面上拉触底事件的处理函数
	 */
	onReachBottom: function () {

	},

	/**
	 * 用户点击右上角分享
	 */
	onShareAppMessage: function () {

	},



	_init: async function () {
		await app.getOpenidReady();

		let [userInfo, recruiteeInfo] = await Promise.all([
			UserService.loadUserInfo(),
			UserService.loadRcruiteeInfo(),
		]);

		// let userInfo = infoList[0];
		// let recruiteeInfo = infoList[1];

		this.setData({
			tximg: stringEb(
				recruiteeInfo.portraitPath,
				userInfo.avatarurl,
			),
			name: stringEb(
				recruiteeInfo.realName,
				userInfo.nickname,
			),
			sex: user.genderList[recruiteeInfo.gender],
			ygz: new user.Salary(
				recruiteeInfo.expectSalaryMin,
				recruiteeInfo.expectSalaryMax,
			).value,
			zwpj: recruiteeInfo.introduction,
		});
	}
})
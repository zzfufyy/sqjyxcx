// pages/qyzc/qyzc.js
var QQMapWX = require('../../mapjs/qqmap-wx-jssdk.js');
// 实例化API核心类

Page({

	/**
	 * 页面的初始数据
	 */
	data: {
		array:['IT','文化传媒','电子制造'],
		index:0,
		array1:['社区1','街道1','街道2'],
		index1:0,
	  positionData: '',
	wantjob:[{job:'IT',id:0},{job:'文化传媒',id:1},{job:'电子制造',id:2},{job:'电子制造',id:3},{job:'电子制造',id:4}],
		datdid:''
	},
	// 行业分类选择
	bindPickerChange(e){
		console.log('picker发送选择改变，携带值为', e.detail.value)
    this.setData({
      index: e.detail.value
    })
	},
	// 社区选择
	bindPickerChange1(e){
		console.log('picker发送选择改变，携带值为', e.detail.value)
    this.setData({
      index1: e.detail.value
    })
	},
	// 更改定位
	changedw(e){
		let that = this
		wx.chooseLocation({
      type: 'gcj02',
      success (res) {
        console.log(res)
        const latitude = res.latitude
				const longitude = res.longitude
				var positionData = res.address
				that.setData({
					positionData:positionData
				})
			}
		})
	},
	// 招聘岗位意向去除
	closethis(e){
		let id = e.currentTarget.dataset.id
		console.log(id)
		for (let i = 0; i < this.data.wantjob.length; i++) {
			if (this.data.wantjob[i].id == id) {
				if (this.data.wantjob[i].checked == true) {
					this.data.wantjob[i].checked = false;
				} else {
					this.data.wantjob[i].checked = true;
				}
			}
		}
		this.setData({
			wantjob: this.data.wantjob,
			msg: "id:"+id
		})
	},
	//企业注册提交审核
	wstijsq(){
		wx.navigateTo({
			url: '/pages/waiteyz/waiteyz',
		})
	},
	/**
	 * 生命周期函数--监听页面加载
	 */
	onLoad: function (options) {
		var qqmapsdk = new QQMapWX({
			key: 'Z3WBZ-TX76I-CKXGO-5GWTU-CSSK3-7LBFO' // 必填
		});
		var that = this
		// 获取位置信息
    wx.getLocation({
      type: 'gcj02',
      success (res) {
        console.log(res)
        const latitude = res.latitude
        const longitude = res.longitude
				wx.request({
					url: 'https://apis.map.qq.com/ws/geocoder/v1/?location='+latitude+','+longitude+'&key=Z3WBZ-TX76I-CKXGO-5GWTU-CSSK3-7LBFO&get_poi=0',
					method:'GET',
					success (res) {
						console.log(res.data)
						var positionData = res.data.result.address
						that.setData({
							positionData:positionData
						})
					}
				})
				// qqmapsdk.reverseGeocoder({
				// 	success:function(res){
				// 		var address = res.result.address
				// 		console.log(address)
				// 	console.log(latitude)

				// 		that.setData({
				// 			latitude:latitude,
				// 			longitude:longitude,
				// 			positionData: address
				// 		})
				// 	}
				// })
      }
		 })

		 
	},

	/**
	 * 生命周期函数--监听页面初次渲染完成
	 */
	onReady: function () {

	},

	/**
	 * 生命周期函数--监听页面显示
	 */
	onShow: function () {

	},

	/**
	 * 生命周期函数--监听页面隐藏
	 */
	onHide: function () {

	},

	/**
	 * 生命周期函数--监听页面卸载
	 */
	onUnload: function () {

	},

	/**
	 * 页面相关事件处理函数--监听用户下拉动作
	 */
	onPullDownRefresh: function () {

	},

	/**
	 * 页面上拉触底事件的处理函数
	 */
	onReachBottom: function () {

	},

	/**
	 * 用户点击右上角分享
	 */
	onShareAppMessage: function () {

	}
})